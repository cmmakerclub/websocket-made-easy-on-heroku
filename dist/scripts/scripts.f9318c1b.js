"use strict";angular.module("yeomanHerokuAngularApp",["ngAnimate","ngCookies","ngResource","ngRoute","btford.socket-io","ngSanitize","ngTouch"]).factory("socket",["socketFactory",function(a){return a()}]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).when("/camera",{templateUrl:"views/camera.html",controller:"CameraCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("yeomanHerokuAngularApp").controller("MainCtrl",["$scope","socket",function(a,b){b.on("socket",function(b){a.socket_id=b.socket_id,a.$apply()}),b.on("socket-data",function(b){a.temperature=b.p1,a.$apply(function(){})})}]),angular.module("yeomanHerokuAngularApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("yeomanHerokuAngularApp").controller("CameraCtrl",["$scope","socket",function(a,b){a.message="Hello",a.fps=3,a.$watch("fps",function(b){clearInterval(a.timer),a.timer=setInterval(a.timer_callback,1e3/b)}),a.timer_callback=function(){a.streaming&&(a.frame++,a.image_data=a.canvas.toDataURL("image/jpeg"),b.emit("frame",a.image_data)),a.ctx.drawImage(a.video,0,0,320,240)},a.$on("$viewContentLoaded",function(){a.video=angular.element("#live")[0],a.canvas=angular.element("#canvas")[0],a.ctx=a.canvas.getContext("2d")}),a.streaming_callback=function(b){a.video.src=window.URL.createObjectURL(b),a.streaming=!0,a.$apply()},a.error_callback=function(){console.log("Unable to get video stream!"),a.streaming=!1,a.$apply()},a.capture=function(){navigator.getMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.getMedia({video:!0,audio:!1},a.streaming_callback,a.error_callback),a.capture_num++},a.timer=setInterval(a.timer_callback,1e3/a.fps)}]);